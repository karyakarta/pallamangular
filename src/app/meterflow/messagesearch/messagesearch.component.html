
<div class="container-fluid">
 <div class="loading" id="spinner"></div>
<ul class="nav nav-tabs">
    <li class="nav-item"><a class="nav-link active bg-light" data-toggle="tab" href="#searchCriteria">Search Criteria</a></li>
    <li class="nav-item"><a class="nav-link bg-light" data-toggle="tab" href="#searchResults" id="searchResultsTab">Search Results</a></li>
  </ul>
  <div class="tab-content">
    <div id="searchCriteria" class="tab-pane fade in active show">
      <form #search = "ngForm" (ngSubmit) = "messageSearch(search.value)">
        <div class="row">
            <div class="col-6"><!--left side -->
            <div class="panel panel-default">
				<div class="panel-heading bg-secondary mb-2 mt-2" style="color: white">Message</div>
				<div class="panel-body">
                <div class="form-group row">
                	<label for="includeSelect" class="col-md-6 col-form-label">Include:</label>
                    <div class="col-md-6">
                    	<select class="form-control" id="includeSelect" [(ngModel)]="searchInput.include" name="include">
							<option value="ALL">All</option>
							<option value="VALID">Valid</option>
							<option value="WARNING">Warning</option>
							<option value="INVALID">Invalid</option>
						</select>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="exceptionType" class="col-md-6 col-form-label">Exception Type:</label> 
                    <div class="col-md-6">
                        <select	class="form-control" id="exceptionType" [(ngModel)]="searchInput.exceptionType" name="exceptionType">
							<option>Select</option>
							<option>MDD_VALID_SET</option>
							<option>REPLACEMENT_READ_EXCPT</option>
							<option>REQ!MTR!INVSTGN</option>
						</select>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="mpxn" class="col-md-6 col-form-label">MPxN</label>
                    <div class="col-md-6">
                           <input type="text" class="form-control" id="mpxn" [(ngModel)]="searchInput.mpxn" name="mpxn">
                    </div>
                </div>
				<div class="form-group row">
                    <label for="transactionRef" class="col-md-6 col-form-label">Transaction Ref</label>
                    <div class="col-md-6">
                          <input	type="text" class="form-control" id="transactionRef" id="transactionRef" [(ngModel)]="searchInput.transactionRef" name="transactionRef">
                    </div>
                </div>
					
				<div class="form-group row">
                    <label for="confirmationReferenceNumber" class="col-md-6 col-form-label">Confirmation Reference Number</label> 
                    <div class="col-md-6">
                          <input type="text" class="form-control" id="confirmationReferenceNumber" [(ngModel)]="searchInput.confirmationReferenceNumber" name="confirmationReferenceNumber">
                    </div>
                </div>

				<div class="form-group row">
                    <label for="nominationShipperReference" class="col-md-6 col-form-label">Nomination Shipper Reference</label>
                    <div class="col-md-6">
                           <input type="text" class="form-control" id="nominationShipperReference" [(ngModel)]="searchInput.nominationShipperReference" name="nominationShipperReference">
                    </div>
                </div>
            </div>
            </div>
            </div>
           

            <div class="col-6">
  <div class="panel panel-default">
				<div class="panel-heading bg-secondary mb-2  mt-2" style="color: white">Participants And Roles</div>
                <div class="form-group row">
                    <label for="fromParticipant" class="col-md-6 col-form-label">From Participant:</label> 
                    <div class="col-md-6">
                       <select
						class="form-control" id="fromParticipant" [(ngModel)]="searchInput.fromParticipant" name="fromParticipant">
						<option>Test</option>
						</select>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="toParticipant" class="col-md-6 col-form-label">To Participant:</label> 
                    <div class="col-md-6">
                        <select
						class="form-control" id="toParticipant" [(ngModel)]="searchInput.toParticipant" name="toParticipant">
						<option>Test</option>
					</select>
                    </div>
                </div>

                <div class="form-group row">
                  <label for="fromRole" class="col-md-6 col-form-label">From Role:</label>
                    <div class="col-md-6">
                        <select
						class="form-control" id="fromRole" [(ngModel)]="searchInput.fromRole" name="fromRole">
						<option>Test</option>
					</select>
                    </div>
                </div>
                
                  <div class="form-group row">
                    <label for="toRole" class="col-md-6 col-form-label">To Role:</label>
                    <div class="col-md-6">
                        <select class="form-control"
						id="toRole" [(ngModel)]="searchInput.toRole" name="toRole">
						<option>Test</option>
					</select>
                    </div>
                </div>
				</div>
				

            </div>
        </div>
        
         <div class="row">
            <div class="col-6"><!--left side -->
			<div class="panel panel-default">
				<div class="panel-heading bg-secondary mb-2" style="color: white">Date Range</div>
				<div class="form-group row">
                    <label for="startDate" class="col-md-6 col-form-label">Start Date:</label>
                    <div class="col-md-6">
                          <input
						type="datetime-local" id="startDate" name="startDate" [(ngModel)]="searchInput.startDate" name="startDate" format-value="yyyy-MM-ddTHH:mm"
						class="form-control">
                    </div>
                </div>
                
                <div class="form-group row">
                    <label for="endDate" class="col-md-6 col-form-label">End Date:</label>
                    <div class="col-md-6">
                           <input type="datetime-local"
						id="endDate" name="endDate" value="2020-10-12T08:30"
						class="form-control" [(ngModel)]="searchInput.endDate" name="endDate">
                    </div>
                </div>
            </div>
            </div>


            <div class="col-6">
  <div class="panel panel-default">
				<div class="panel-heading bg-secondary mb-2" style="color: white">Flow And Flow Family</div>
                <div class="form-group row">
                    <label for="flowFamily" class="col-md-6 col-form-label">Flow Family:</label>
                    <div class="col-md-6">
                      <select
						class="form-control" id="flowFamily" [(ngModel)]="searchInput.flowFamily" name="flowFamily">
						<option>Test</option>
						</select>
                    </div>
                </div>
                
                 <div class="form-group row">
                   <label for="flowType" class="col-md-6 col-form-label">Flow Type:</label>
                    <div class="col-md-6">
                       <select
						class="form-control" id="flowType" [(ngModel)]="searchInput.flowType" name="flowType">
						<option>Test</option>
					</select>
                    </div>
                </div>
</div>
             
            </div>
        </div>
         <div class="container bg-white">
        <div class="col-md-12 text-center">
            <button type="submit" class="btn btn-secondary m-3">Search</button>
            <button type="button" class="btn btn-secondary m-3" (click)="reset()">Reset</button>
        </div>
    </div>
    </form> 

    </div>
    <div id="searchResults" class="tab-pane fade in" ng-class="{'my-disable':show}">
      <h6>Message Search Results</h6>
      <div class="alert alert-warning alert-dismissible fade show" *ngIf="nodata" >
    		No Records found
    		<button type="button" class="close" data-dismiss="alert">&times;</button>
	 </div>
   <table class="table table-striped table-bordered display nowrap" style="width:100%" *ngIf="show" datatable [dtOptions]="dtOptions" id="messageSearchTable">
  <thead>
    <tr>
      <th>MF File ID</th>
      <th>File ID</th>
      <th>Status</th>
      <th>Process status</th>
      <th>Process ID</th>
      <th>File type</th>
      <th>Date received</th>
      <th>From participant</th>
      <th>From role</th>
      <th>To participant</th>
      <th>To role</th>
      <th>MPxN</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
   <tr *ngFor="let file of result"  [routerLink]="['/meterflow/marketflow/message/search/fileview']">
         <td>{{file.dtsFid}}</td>
         <td>{{file.fileUid}}</td>
         <td style="vertical-align:middle;text-align:center;">
            <i class="fas fa-circle" style="float:center; color:green;" *ngIf="(file.hasWrngs==0 && file.hasExcpts==0)"></i>
         	<i class="fas fa-times" style="float:center; color:yellow;" *ngIf="(file.hasWrngs==1)"></i>
         	<i class="fas fa-times" style="float:center; color:red;" *ngIf="(file.hasExcpts==1)"></i>
         </td>
         <td style="vertical-align:middle;text-align:center;"><i class="fa fa-cog fa-1x" style="float:center; color:rgb(255, 153, 0);"></i></td>
        <!-- <td style="vertical-align:middle;text-align:center;">
	         <i class="fas fa-cog fa-2x" style="float:center; color:green;"  *ngIf="(file.stat == 'RU')"></i>
	         <i class="fas fa-cog fa-2x" style="float:center; color:grey;"  *ngIf="(file.stat == 'CO')"></i>
	         <i class="fas fa-cog fa-2x" style="float:center; color:red;"  *ngIf="(file.stat == 'ER')"></i>
	         <i class="fas fa-cog fa-2x" style="float:center; color:rgb(255, 153, 0);"  *ngIf="(file.stat != null && file.stat != 'RU' && file.stat != 'CO' && file.stat != 'ER')"></i>
         </td> -->
         <td>{{file.processId}}</td>
         <td>{{file.cdbFileTyp}}</td>
         <td>{{file.regDate | date: 'dd/MM/yyyy HH:mm:ss' }}</td>
         <td>{{file.frmPtcpt}}</td>
         <td>{{file.frmRole}}</td>
         <td>{{file.toPtcpt}}</td>
         <td>{{file.toRole}}</td>
         <td>{{file.indexedFields['MPxN']}}</td>
         <td style="vertical-align:middle;text-align:center;"><i class="far fa-clock" ></i></td>
     </tr>
  </tbody>
</table>
    </div>
  </div>
  </div>
  
